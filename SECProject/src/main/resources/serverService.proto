syntax = "proto3";

option java_package = "com.server.grpc";

service serverService{
	
	rpc submitLocationReport(subLocRepReq) returns (subLocRepReply);
	rpc obtainLocationReport(obtLocRepReq) returns (obtLocRepReply);

	rpc obtainLocationReportHA(obtLocRepReq) returns (obtLocRepReply);
	rpc obtainUsersAtLocation(obtUseLocReq) returns (obtUseLocRep); 
	
	rpc DHKeyExchange(DHKeyExcReq) returns (DHKeyExcRep);
}

message subLocRepReq{
	int32 userID = 1;
	int32 epoch = 2;
	string report = 3;
	
}

message subLocRepReply{
	string replymessage = 1;
	int32 replycode = 2; 
}

message obtLocRepReq{
	int32 userID = 1;
	int32 epoch = 2;
	
}

message obtLocRepReply{
	int32 userID = 1;
	Position pos = 2;
}

message obtUseLocReq{
	Position pos = 1;
	int32 epoch = 2;
}

message obtUseLocRep{
	int32 epoch = 1;
	repeated string userList = 2;
	
}


message Position{
	int32 X = 1;
	int32 Y = 2;
}


message DHKeyExcReq{
	int32 userID = 1;
	BInteger p = 2;
	BInteger g = 3;
	string MyDHPubKey = 4;
	string digSigPubKey = 5;
}

message DHKeyExcRep{
	string myPubKey = 1;
	string digSigPubkey = 2;
}

message BInteger {
   bytes value = 1;
}


